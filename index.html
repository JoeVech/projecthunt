<!DOCTYPE html>
<html>
<head>
    <title>Camera Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { margin: 0; overflow: hidden; }
        #videoContainer {
            width: 100vw;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
        }
        #status {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            font-family: Arial;
            z-index: 1000;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div id="status">–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–º–µ—Ä—ã...</div>
    <video id="video" autoplay playsinline></video>

    <script>
        // –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–µ–¥–∏–∞—É—Å—Ç—Ä–æ–π—Å—Ç–≤
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            document.getElementById('status').innerHTML = 
                '–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ Chrome –∏–ª–∏ Safari';
            throw new Error('Camera API not supported');
        }

        // –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ
        navigator.mediaDevices.getUserMedia({
            video: {
                facingMode: 'environment', // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–¥–Ω—é—é –∫–∞–º–µ—Ä—É
                width: { ideal: 1280 },
                height: { ideal: 720 }
            }
        }).then(stream => {
            // –®–∞–≥ 3: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞
            const video = document.getElementById('video');
            video.srcObject = stream;
            video.onloadedmetadata = () => {
                video.play();
                document.getElementById('status').innerHTML = 
                    '–ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç! üé•<br>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ' + 
                    video.videoWidth + 'x' + video.videoHeight;
            };
        }).catch(error => {
            // –®–∞–≥ 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
            let errorMessage = '–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ: ';
            switch(error.name) {
                case 'NotAllowedError':
                    errorMessage += '–í—ã –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ';
                    break;
                case 'NotFoundError':
                    errorMessage += '–ö–∞–º–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞';
                    break;
                case 'NotReadableError':
                    errorMessage += '–ö–∞–º–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º';
                    break;
                default:
                    errorMessage += error.message;
            }
            document.getElementById('status').innerHTML = errorMessage;
        });

        // –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Telegram
        if (typeof Telegram !== 'undefined') {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
        }
    </script>
</body>
</html>
